'''
  Copyright (C) 2025  Linked Ideal LLC.[https://linked-ideal.com/]
 
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, version 3.
 
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.
 
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
'''

from fastapi.testclient import TestClient
from api import app
from ToposoidCommon.model import TransversalState, SynonymList, FeatureVector
import pytest
import os
from fastapi.encoders import jsonable_encoder
#This is a unit test module

class TestVoldAPI(object):

    client = TestClient(app)
    transversalState = str(jsonable_encoder(TransversalState(userId="test-user", username="guest", roleId=0, csrfToken = "")))
    def test_EmptyWord(self):    
        response = self.client.post("/getSynonyms",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"word": ""})    
        assert response.status_code == 200
        synonymList = SynonymList.parse_obj(response.json())
        assert synonymList.synonyms == []

    def test_SimpleVerb(self):    
        response = self.client.post("/getSynonyms",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"word": "execute"})    
        assert response.status_code == 200
        synonymList = SynonymList.parse_obj(response.json())
        assert synonymList.synonyms.sort() == ['accomplish', 'perform'].sort()

    def test_SimpleNoun(self):    
        response = self.client.post("/getSynonyms",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"word": "agreement"})    
        assert response.status_code == 200
        synonymList = SynonymList.parse_obj(response.json())
        assert synonymList.synonyms.sort() == ['accord', 'arrangement'].sort()

    def test_VocabularyNotFoundInWordNet(self):    
        response = self.client.post("/getSynonyms",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"word": "research"})    
        assert response.status_code == 200
        synonymList = SynonymList.parse_obj(response.json())
        assert synonymList.synonyms.sort() == ['RESEARCH', 'Studies', 'STUDIES', 'Research', 'studies'].sort()

    def test_VocabularyNotFoundInWord2Vec(self):    
        response = self.client.post("/getSynonyms",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"word": "aslkfjg"})    
        assert response.status_code == 200
        synonymList = SynonymList.parse_obj(response.json())
        assert synonymList.synonyms == []

    def test_GetFeatureVector(self):
        import math
        response = self.client.post("/getFeatureVector",
                            headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": self.transversalState},
                            json={"sentence": "This is a test."})    
        assert response.status_code == 200
        featureVector = FeatureVector.parse_obj(response.json())
        if os.environ['TOPOSOID_SENTENCEBERT_MODEL_EN'] == "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2":        
            correctVector = [0.1524999439716339, 0.48042741417884827, -0.30528321862220764, -0.04725565388798714, 0.03611695393919945, -0.12813147902488708, 0.5153798460960388, 0.03524904325604439, -0.14065973460674286, -0.12373621016740799, 0.12760306894779205, -0.6661005020141602, -0.0023319567553699017, 0.16075466573238373, -0.39777469635009766, -0.23029246926307678, -0.05268416553735733, -0.3773220479488373, 0.15857362747192383, 0.2933051586151123, 0.5503929257392883, -0.014684787020087242, -0.0528985895216465, -0.02852769009768963, -0.1834334135055542, -0.05381852015852928, 0.32409247756004333, 0.06965936720371246, 0.1820612996816635, -0.2165127545595169, -0.19431297481060028, -0.061628006398677826, 0.0015103766927495599, -0.3108256459236145, 0.18439577519893646, 0.0035882124211639166, -0.03922645375132561, -0.10801354795694351, 0.1313697248697281, 0.003953459672629833, 0.06638817489147186, -0.535983681678772, 0.11187206953763962, 0.3129540979862213, 0.3224700391292572, 0.45832306146621704, -0.0061958348378539085, -0.10087092220783234, -0.044640086591243744, 0.061996255069971085, -0.13195618987083435, -0.42539772391319275, -0.14529874920845032, -0.41175562143325806, 0.1378294676542282, -0.11425884813070297, 0.1561739146709442, 0.029742499813437462, -0.24602010846138, 0.17034432291984558, 0.1388351321220398, -0.1380174458026886, -0.35392338037490845, 0.34040671586990356, 0.18003809452056885, -0.2629149258136749, 0.083292655646801, -0.19835567474365234, 0.05387691780924797, 0.3146360516548157, -0.4350075423717499, -0.030070940032601357, 0.02633485198020935, 0.10091245174407959, 0.022895915433764458, 0.4398996829986572, -0.13980796933174133, -0.07333444803953171, 0.21191655099391937, -0.10002732276916504, 0.15865668654441833, 0.11868082731962204, -0.0253800880163908, -0.017017556354403496, 0.3438427746295929, 0.2770683169364929, -0.15068648755550385, 0.34168264269828796, -0.13162031769752502, 0.03693100064992905, 0.3649758994579315, -0.1669314056634903, 0.20066659152507782, 0.09731701761484146, 0.4390931725502014, -0.01966140978038311, 0.04766923561692238, -0.20715869963169098, 0.24730589985847473, 0.8506559729576111, -0.0898219496011734, 0.06001364439725876, -0.38597920536994934, -0.0014240039745345712, -0.013544110581278801, 0.15390178561210632, -0.1681586503982544, -0.4175908863544464, 0.1384660303592682, -0.13782860338687897, -0.0027292424347251654, -0.007086624391376972, 0.09866245090961456, 0.36387011408805847, 0.11444922536611557, -0.1702962964773178, 0.06400931626558304, 0.07292325049638748, -0.14065603911876678, 0.7523465156555176, 0.21216726303100586, -0.46923309564590454, 0.1521013081073761, -0.32681846618652344, 0.5136815309524536, -0.7227687835693359, 0.11863519251346588, 0.20656593143939972, 0.1449810117483139, -0.15876992046833038, 0.4863394796848297, 0.2634255886077881, -0.42269906401634216, 0.30973392724990845, -0.30366775393486023, -0.0038864430971443653, 0.2386239916086197, 0.3598708510398865, 0.22732119262218475, 0.23269125819206238, -0.3230474591255188, 0.28389811515808105, 0.1762704700231552, 0.38446110486984253, -0.26893725991249084, -0.04619292542338371, -0.6391482949256897, 0.17119856178760529, 0.16002073884010315, -0.2772633731365204, 0.37068477272987366, -0.17779794335365295, 0.008257351815700531, 0.15721860527992249, -0.38516393303871155, -0.2868468761444092, 0.11244463175535202, 0.23406751453876495, 0.08188118040561676, -0.28408724069595337, -0.37200087308883667, 0.2586425840854645, -0.23824191093444824, 0.25133877992630005, 0.4313792586326599, -0.2514585852622986, -0.04212924838066101, -0.10390578210353851, -0.06120714917778969, 0.17080962657928467, 0.7559390068054199, -0.031469639390707016, -0.04958445578813553, -0.2825797200202942, -0.1550811231136322, 0.1258896291255951, -0.06613891571760178, 0.5098056793212891, -0.3341354429721832, 0.08255060017108917, 0.21023526787757874, -0.20754317939281464, -0.09130265563726425, -0.07744205743074417, -0.08250989764928818, 0.15492992103099823, -0.28943902254104614, -0.1108095720410347, 0.1519528478384018, 0.3339686691761017, -0.03468519076704979, 0.05195542052388191, -0.20151355862617493, 0.4826897978782654, -0.3462556004524231, -0.1561870574951172, 0.3568728566169739, -0.19070753455162048, -0.12831443548202515, -0.30646246671676636, -0.1251329779624939, -0.1996469497680664, 0.09525050967931747, -0.29454249143600464, 0.42439037561416626, 0.09984243661165237, 0.2594173848628998, -0.7176781892776489, 0.33575791120529175, 0.02038760483264923, -0.4765109121799469, -0.16061754524707794, -0.19782589375972748, -0.009922723285853863, 0.05765369161963463, -0.1948045939207077, -0.12961985170841217, -0.13754837214946747, -0.018500477075576782, 0.0816883072257042, -0.2907011806964874, -0.37616944313049316, 0.24800164997577667, -0.7273216843605042, -0.3319531977176666, -0.12322743982076645, -0.06157715246081352, 0.25672096014022827, 0.2981226444244385, -0.31047675013542175, 0.8030520081520081, 0.037659745663404465, 0.04540712386369705, 0.21636350452899933, 0.2668299973011017, -0.3624700605869293, -0.5498879551887512, 0.3554929792881012, -0.12291229516267776, -0.12119346112012863, -0.21012158691883087, -0.07608292996883392, 0.16730229556560516, -0.024870898574590683, -0.003563493024557829, 0.32052093744277954, 0.1782504767179489, 0.36294981837272644, -0.17455221712589264, 0.20416834950447083, -0.41046181321144104, -0.6832084059715271, 0.03555832430720329, -0.0008682034094817936, -0.2552860677242279, -0.1576600819826126, 0.1823430061340332, 0.8335527181625366, 0.06779035180807114, -0.10947443544864655, 0.5992329716682434, -0.23379631340503693, 0.020120438188314438, -0.05289449170231819, 0.032632216811180115, 0.11210779845714569, 0.021898195147514343, 0.1933484971523285, -0.07456310838460922, 0.27041175961494446, 0.12523646652698517, -0.19066452980041504, -0.07239633053541183, 0.20251180231571198, 0.08509193360805511, -0.13695427775382996, 0.054390303790569305, 0.13126970827579498, -0.0805669054389, 0.035197798162698746, -0.23639307916164398, -0.4047561585903168, -0.08622421324253082, 0.05894936993718147, 0.3098032474517822, -0.1731201559305191, 0.2108025848865509, -0.10615449398756027, 0.018416618928313255, 0.08799242228269577, -0.20725536346435547, 0.4391777217388153, 0.17693252861499786, 0.05184309929609299, -0.31132301688194275, -0.014501879923045635, 0.0680728405714035, -0.3522845208644867, 0.09829401224851608, -0.05196041613817215, -0.36319229006767273, 0.2673376500606537, -0.5000462532043457, -0.0398467518389225, -0.027201935648918152, -0.1393059939146042, 0.16166336834430695, 0.3622519075870514, 0.24494525790214539, -0.08381229639053345, -0.0056301625445485115, -0.02472037449479103, -0.03519944101572037, 0.3605585992336273, 0.1940307319164276, 0.05921102315187454, -0.33685407042503357, -0.23791185021400452, 0.18378467857837677, -0.5032899975776672, -0.12127319723367691, -0.2481675148010254, -0.3441307544708252, -0.03282357379794121, -0.0474926233291626, 0.21721415221691132, -0.2887384295463562, -0.5030452609062195, -0.059100423008203506, -0.2527638375759125, -0.07644631713628769, 0.491739422082901, -0.3769579231739044, -0.09846267849206924, -0.06350968778133392, 0.18747326731681824, -0.27629920840263367, 0.2763958275318146, -0.16051125526428223, -0.03879948705434799, -0.012390755116939545, -0.2700482904911041, -0.039780110120773315, -0.015664849430322647, -0.09691382944583893, 0.1349160373210907, -0.12845537066459656, -0.15998871624469757, -0.1300790160894394, -0.2989368140697479, 0.11192894726991653, 0.31240224838256836, -0.12129949033260345, -0.0704507976770401, 0.20213398337364197, 0.14802038669586182, -0.12648986279964447, 0.3033497929573059, 0.21646323800086975, 0.16344745457172394, -0.2596360743045807, -0.28702500462532043, -0.10634192079305649, 0.2635798156261444, 0.17616227269172668, -0.04409775510430336, -0.45018795132637024, -0.18944542109966278, -0.1452680081129074, -0.09850520640611649, -0.09861451387405396, -0.028936102986335754, -0.08232961595058441, -0.19142340123653412, 0.1754039078950882, 0.20781071484088898, 0.1824997216463089, -0.13995833694934845, -0.3895506262779236, 0.22838325798511505, 0.3373994827270508, 0.4167574346065521, 0.2947978675365448, 0.16614612936973572]
        else:
            correctVector = [-0.08030792,-0.13426998,-0.0131171355,-0.055471413,-0.13784735,0.018687295,0.113157324,0.05909053,0.18047537,0.09854899,0.24261141,-0.040015884,-0.19555734,-0.12732792,0.07901483,0.1311797,-0.10897825,0.10183691,-0.04023331,0.11435972,-0.0988878,-0.12562631,0.051610883,0.054774743,-0.072231114,-0.03274859,-0.059694882,-0.051439192,0.12638001,-0.08310621,0.17978041,0.018675655,-0.10471279,0.0595525,0.01902026,-0.099462785,0.102816276,-0.048282173,-0.1738145,0.1114413,0.003912856,0.28830785,0.06780086,-0.060355924,-0.04787218,-0.070562355,0.08991437,-0.17007692,-0.09358452,0.047927447,0.009206603,0.41955534,-0.25712416,0.035017807,0.2985487,0.05384562,-0.06883323,0.15490279,0.14215763,-0.08272207,0.07911555,-0.04190024,0.19468537,0.15212427,-0.18685642,-0.054087978,0.30747446,0.035124164,-0.16722873,-0.13983832,0.15676577,0.006055371,-0.10317274,0.14092647,0.022121403,-0.108591266,0.26993915,-0.15338944,0.015173051,-0.20100994,-0.040529322,0.1174723,0.026199644,-0.17436396,-0.25265193,0.14316098,-0.0055742073,-0.0016669657,0.020748466,0.060796816,0.07318747,-0.14027484,0.017700082,0.024232643,0.055814058,-0.05753992,-0.19577733,-0.08024013,0.20175742,0.05311526,0.014544257,0.09759059,-0.048254993,0.10778153,-0.04962806,0.09748377,0.14042476,0.097403176,-0.20563014,0.03802457,-0.11474236,0.013621428,0.18488386,-0.1627871,0.11152702,-0.032126185,0.060058553,-0.22292979,-0.0023465913,0.06240093,-0.23009858,0.01833702,-0.009203529,0.02444068,-0.0066179996,0.041616023,-0.053239517,-0.034356255,0.123992205,-0.011343459,0.0032366023,-0.093072094,-0.053871036,0.026187992,-0.005723986,0.021520382,-0.066240005,-0.072145104,0.10663315,-0.17247613,0.030507369,0.046960387,0.10151847,-0.039308112,-0.0033261343,-0.107680954,-0.027924135,-0.04576925,0.04184368,0.16440792,0.21566118,0.10677179,0.16781045,-0.057002265,-0.053111963,0.09220903,0.028648522,-0.14217941,-0.049828064,-0.12122183,0.0849662,-0.15715024,-0.15139696,0.06948726,0.07558049,0.15511963,-0.08552518,-0.011938623,-0.056617204,-0.10250568,-0.1010262,0.14548711,0.038385145,0.23158446,0.0054716235,0.16629513,0.04979673,-0.18799546,0.011014758,-0.014248475,0.019124432,0.10608872,0.16772285,-0.019141512,-0.21320431,0.0688176,-0.06778509,-0.016323712,-0.013769959,0.06379658,-0.11552258,0.014009557,0.094390966,0.14101611,0.025436403,-0.15980735,0.025006235,0.029011384,0.034633208,-0.11401077,0.037261236,-0.08437979,0.16764751,-0.021144027,-0.14451209,-0.054377913,0.11795361,0.0700045,0.103048824,0.10661491,0.3614572,0.0625801,-0.06898157,0.1496868,-0.037759695,0.11562629,-0.030140718,-0.027930379,0.043279476,0.14750984,0.002462287,0.07567786,-0.075582944,0.023843247,-0.17247513,0.02063066,-0.15140617,0.012018559,-0.05136668,-0.035322566,-0.048633832,0.007145461,-0.08811123,-0.0076388726,-0.046421923,-0.10341783,0.13392553,0.15340613,0.09297862,-0.11382317,-0.14039011,-0.021469165,-0.12655734,0.022342386,-0.106986836,-0.06512177,0.1436281,-0.055891395,-0.08857096,-0.08049954,0.037973583,0.09316904,-0.103836715,0.11602109,0.17954613,-0.07917191,-0.03972048,-0.2343074,0.13032968,-0.22399807,-0.0231013,-0.05367878,-0.06746452,-0.067024864,0.24955525,-0.009433602,0.17151107,-0.1680948,0.114138775,-9.813133e-05,0.19826458,-0.09292175,-0.038946915,-0.006913309,0.07471915,0.010469477,-0.15910093,0.030953662,-0.120661914,0.055569787,-0.05553981,-0.14797866,-0.04527342,0.07845456,-0.12842785,0.0782184,0.14839311,0.07455015,0.18224292,0.10695093,0.115469754,-0.00085058727,0.07791956,-0.10147145,0.16387996,-0.10625254,-0.03082508,0.15964223,0.014651381,-0.082659766,-0.017087791,0.022986935,-0.027300516,-0.03147813,-0.028785,0.07326104,0.10939075,-0.27248374,0.059975833,0.13735208,-0.049257524,0.10487844,0.025748312,0.24530554,-0.08749036,-0.093166165,-0.011604526,0.051048238,-0.13856605,-0.11415948,-0.13034323,-0.039399426,0.09396885,-0.058264554,-0.04794198,-0.074289694,0.097924136,0.18457404,0.06410272,0.067696884,0.005950748,-0.11412184,0.13671368,0.0265622,-0.07816487,-0.15520993,-0.027926913,0.061001897,-0.15816452,0.054697424,-0.0508276,-0.24595742,-0.046254795,-0.123561904,-0.07327811,0.08947675,-0.21519418,0.10034833,0.030404119,-0.061621163,0.041675147,0.044610497,-0.025424669,-0.112834096,-0.09681747,-0.03723975,-0.045108963,0.1438394,0.11849155,-0.101040184,-0.042237636,-0.02446283,-0.16766058,0.12786762,-0.20450065,0.11807449,-0.09641353,0.08821952,-0.051292147,-0.0021382463,0.033182155,0.032904953,-0.056706067,0.014013235,0.07974144,0.26775146,0.1488585,-0.12081281,-0.25209928,-0.06625452,0.10532612,-0.45522466,0.03445529,-0.06079214,-0.050157044,-0.053325314,-0.06623632,-0.062251654,-0.013813148,0.08366328,-0.14591546,-0.094089605,-0.0029763193,0.065840125,0.22480209,-0.018793097,0.17122844,0.10027486,-0.0088509405,0.15841602,0.024233537,0.14708398,-0.0135497,0.45881513,-0.0130409,-0.12751868,-0.14336927,0.088780455,-0.10415421,-0.12945172,-0.07269237,-0.04544989,0.1141158,0.013642615,-0.07302607,0.25103685,-0.0018896059,-0.22632425,0.016102144,-0.08489815,-0.025495062,0.17228518,-0.109222755,0.016842043,-0.14675805,-0.06859152,-0.1838616,-0.05768212,0.19105981,0.07399733,-0.011210364,-0.086870715,-0.041509498,0.1224225,-0.3389854,-0.23987497,-0.09251867,0.108849585,0.25691363,-0.12598576,0.075733386,0.02111814,0.31322163,0.07407034,-0.20257124,0.07553981,-0.13637117,-0.0058023143,0.09935217,0.03416792,0.16227193,0.051013794,0.087399326,0.11512906,0.19052646,-0.12827997,0.024271324,-0.15240863,-0.06698319,0.13215251,0.032357864,0.41060582,-0.14820509,0.08537345,0.023854548,0.01832819,-0.18512687,0.022660239,-0.013466405,-0.11092313,-0.11574247,0.12107351,-0.06916464,0.14518675,-0.106400274,0.0010188073,-0.048553374,-0.1434381,-0.03964744,-0.00029481572,0.07786985,-0.10191751,0.02822322,-0.016841168,-0.011817552,0.050241835,0.12317584,-0.093219884,0.009537375,-0.108780086,0.000933446,-0.05225047,-0.008913887,-0.056906674,-0.14108355,0.12943925,-0.119871676,0.039503895,-0.0024717222,-0.10192614,0.18957734,0.101629734,0.0029925543,-0.08098789,-0.052251767,0.24281497,0.05671423,-0.090225056,-0.010881759,-0.22966588,0.053277235,-0.01173961,-0.045135725,0.21909034,0.039526876,-0.11264528,-0.13640311,-0.03584469,0.04807079,-0.08988953,0.1579943,-0.030945709,-0.1597688,-0.07862674,0.18248951,0.019944826,0.0587958,0.0065498515,-0.07878834,0.01717365,0.0009510698,-0.057136867,-0.2740294,0.17209633,-0.0048236465,0.11864955,0.069090314,0.09036178,-0.003912186,-0.35297605,-0.038106795,0.011455767,0.16717324,0.16323714,0.11020749,0.13530304,-0.028364956,-0.046669662,0.05418523,-0.028339695,-0.018154,0.075221196,0.155528,-0.12341745,0.0044389185,-0.14646952,-0.0909495,-0.089279465,0.1453527,-0.16933309,0.06455202,0.091962956,-0.1926242,0.18493262,-0.08718322,-0.06551265,-0.11793389,0.015406057,0.2952324,0.16814038,-0.014871412,-0.04837025,0.07992978,0.18601623,-0.117919624,-0.07486228,-0.08468003,-0.061459728,0.024180712,0.07362182,0.08979338,-0.07444121,0.113797426,-0.0897272,-0.26202884,0.06999736,0.10824461,0.038117435,0.21563594,-0.08821374,0.1017248,0.17834632,-0.08658479,-0.15752593,-0.1781845,-0.0836249,-0.10829403,0.13110317,0.12532778,0.08167602,0.0951343,-0.109253705,-0.054734264,0.016291546,0.044545565,-0.02342348,0.067482464,0.04612815,0.08305917,-0.0064934925,-0.06760106,0.11495701,-0.044477638,-0.16537096,0.16233447,-0.075373106,0.025118496,-0.005880878,0.069590166,-0.093754515,-0.119494915,-0.1289417,-0.23729846,0.06954973,0.25808412,-0.1580944,0.06834353,-0.017740736,0.06334716,0.27818167,-0.047426004,-0.05872256,0.0509437,0.20085175,0.057397094,-0.0046307286,-0.13445623,0.07845317,-0.16908343,0.01488454,-0.097213134,0.05369919,-0.025027217,0.006384179,0.04757123,0.014364938,-0.06651758,0.01810543,-0.0095422,0.09486924,0.11986881,0.08799696,0.043195885,0.086782634,-0.0048529706,-0.10343647,-0.14842407,0.04193022,0.099111564,-0.10321824,-0.03151951,-0.08813083,0.01816653,-0.174372,-0.057229925,-0.018565,-0.065113045,-0.026886111,-0.008671655,-0.16229923,0.024334487,0.15452321,0.018972332,-0.11413505,0.13020195,-0.19966812,0.0030063584,0.30134973,-0.09614736,0.05625081,-0.009159073,0.15384264,0.041702334,0.21782443,-0.12058192,0.035013463,-0.14805713,0.116181396,0.02299145,-0.09857701,0.118088506,-0.018484045,0.19034187,-0.029035967,-0.04400083,-0.12340945,-0.009601251,0.079266414,-0.20766416,0.10025178,0.035317067,0.03216269,0.016827429,0.07288833,0.07094292,0.07535956,-0.005554679,-0.0085907625,-0.047824357,0.06864922,-0.22973765,0.048447292,-0.17778029,-0.13197587,-0.22272737,-0.15092312,0.012119838,0.079774626,0.019855734,-0.021238131,0.07144044,0.01756936,0.4964235,0.096716635,-0.055587463,0.06542975,0.18285175,0.1383957,-0.034196172,-0.09985976,-0.088007346,0.16586398,0.17228244,0.2144012,0.117479935,0.01973975,-0.06528995,0.008169169,-0.17002659,0.09448391,0.0032395828,0.011848961,0.20326124,-0.049364503,0.076359235,-0.040033136,0.12288116,0.047304958,0.006401787,-0.005320299,-0.029355628,-0.020445615,-0.056633797,-0.22535904,-0.16427557,-0.15280113,0.24209967,-0.17463581,0.3793462,-0.09854597,-0.057193253,0.14605747,0.01937811,0.037701506,-0.0015639727,0.1416323,-0.017103571,-0.17346434]        
        x = False in list(map(lambda x: math.isclose(x[0], x[1], abs_tol=0.00001), zip(featureVector.vector, correctVector)))
        assert not x
